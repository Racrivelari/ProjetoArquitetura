<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetroNaka</title>
    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheet/pedidos.css" />
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>

<body>
    <header class="CabecalhoHome">
        <div class="Logo">
            <img class="logo" src="../images/PetroNaka1.png" alt="...">
        </div>
    </header>

    <div class="linha-amarela"></div>

    <main class="MainLogin">
        <section id="lista-pedidos">
            <h2>Lista de Pedidos</h2>
            <input type="text" id="buscar" placeholder="Buscar por pedido">
            <table>
                <thead>
                    <tr>
                        <th>Número Pedido</th>
                        <th>Nome da Usina</th>
                        <th>Nome do Produto</th>
                        <th>Quantidade</th>
                        <th>Preço</th>
                        <th>Destino</th>
                    </tr>
                </thead>
                <tbody id="tabela-pedidos">
                    {{#pedidos}}
                    <tr class="pedido">
                        <td>{{_id}}</td>
                        <td class="usina">{{usina}}</td>
                        <td class="produto">{{produto}}</td>
                        <td>{{quantidade}}</td>
                        <td>{{preco}}</td>
                        <td>{{destino}}</td>
                        <td><button class="btn-excluir" onclick="excluirPedido('{{_id}}')">excluir</button></td>
                    </tr>
                    {{/pedidos}}
                </tbody>
            </table>
        </section>
        <form action="/pedidos/novoPedido" method="GET">
            <button type="submit">Novo pedido</button>
        </form>

    </main>

    <footer>
        <div></div>
    </footer>
    <script src="../javascripts/pedidos.js"></script>
    <script>
        const buscarInput = document.getElementById("buscar");
        const tabelaPedidos = document.getElementById("tabela-pedidos");
        const rows = tabelaPedidos.getElementsByTagName("tr");

        buscarInput.addEventListener("input", function () {
            const searchString = this.value.toLowerCase();

            for (const row of rows) {
                const usina = row.querySelector(".usina").textContent.toLowerCase();
                const produto = row.querySelector(".produto").textContent.toLowerCase();

                if (usina.includes(searchString) || produto.includes(searchString)) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });
        
    </script>
</body>

</html>